<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üöÄ Code Error Finder</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:"Poppins",sans-serif; }
body {
  background: linear-gradient(135deg,#141e30,#243b55);
  color:#fff;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:40px 20px;
}
.container {
  width:100%;
  max-width:1600px;
  background:rgba(255,255,255,0.05);
  border-radius:25px;
  padding:60px 50px;
  box-shadow:0 15px 40px rgba(0,0,0,0.4);
  display:flex;
  flex-wrap:wrap;
  gap:50px;
  animation:fadeIn 1.2s ease-in-out;
}
h1 {
  width:100%;
  text-align:center;
  margin-bottom:60px;
  font-size:3.5rem;
  background:linear-gradient(to right,#00c6ff,#0072ff);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.column {
  flex:1;
  min-width:400px;
  background:rgba(255,255,255,0.05);
  border-radius:25px;
  padding:40px 35px;
  box-shadow:0 8px 30px rgba(0,0,0,0.3);
  display:flex;
  flex-direction:column;
  gap:25px;
}
label { font-weight:600; font-size:1.2rem; }
select, textarea, button {
  width:100%;
  padding:20px 18px;
  border-radius:15px;
  border:none;
  font-size:1.2rem;
  transition:0.3s ease;
  margin-bottom:25px;
}
select, textarea {
  background:#0f2027;
  color:#fff;
  border:2px solid #00c6ff;
}
textarea { resize:none; min-height:450px; line-height:1.8; }
textarea:focus, select:focus {
  border-color:#ff8c00;
  box-shadow:0 0 15px #ff8c00;
}
button {
  background:linear-gradient(to right,#00c6ff,#0072ff);
  color:#fff;
  font-size:1.3rem;
  font-weight:bold;
  cursor:pointer;
  padding:20px;
}
button:hover {
  background:linear-gradient(to right,#ff8c00,#ff2e63);
  transform:scale(1.08);
}
.loader {
  display:none;
  margin:40px auto;
  border:12px solid rgba(255,255,255,0.1);
  border-left-color:#00c6ff;
  border-radius:50%;
  width:90px; height:90px;
  animation:spin 1s linear infinite;
}
@keyframes spin { to{transform:rotate(360deg);} }
.output {
  display:none;
  background:rgba(255,255,255,0.08);
  border-radius:25px;
  padding:35px;
  max-height:700px;
  overflow-y:auto;
  animation:slideUp 0.8s ease-in-out;
}
.output h2 { margin-bottom:25px; color:#00c6ff; font-size:1.8rem; }
.output pre {
  white-space:pre-wrap;
  word-wrap:break-word;
  background:#0f2027;
  padding:25px;
  border-radius:15px;
  color:#fffa;
  font-size:1.1rem;
}
iframe {
  width: 100%;
  height: 400px;
  border: 2px solid #00c6ff;
  border-radius: 15px;
  margin-top: 25px;
  background: #0f2027;
}
.action-buttons { display:flex; gap:15px; margin-bottom:20px; }
.action-buttons button { flex:1; }
@keyframes fadeIn { from{opacity:0; transform:translateY(-20px);} to{opacity:1; transform:translateY(0);} }
@keyframes slideUp { from{transform:translateY(50px);opacity:0;} to{transform:translateY(0);opacity:1);} }

/* Footer styling */
footer {
  margin-top:40px;
  text-align:center;
  font-size:1.1rem;
  opacity:0.8;
}

@media(max-width:1000px){ .container{flex-direction:column;} }
</style>
</head>
<body>

<div class="container">
  <h1>üöÄ Code Error Finder</h1>

  <div class="column">
    <label for="language">Select Language:</label>
    <select id="language">
      <option value="python">üêç Python</option>
      <option value="c">üîµ C</option>
      <option value="cpp">üü£ C++</option>
      <option value="java">‚òï Java</option>
      <option value="js">üü° JavaScript</option>
      <option value="html">üåê HTML</option>
    </select>

    <label for="codeInput">Paste Your Code:</label>
    <textarea id="codeInput" placeholder="Paste your code here..."></textarea>

    <div class="action-buttons">
      <button onclick="analyzeCode()">Analyze Code</button>
      <button onclick="clearCode()">Clear Code</button>
    </div>
  </div>

  <div class="column">
    <div class="loader" id="loader"></div>
    <div class="output" id="output">
      <h2>üîç Analysis Result</h2>
      <div class="action-buttons">
        <button onclick="copyOutput()">üìã Copy Output</button>
      </div>
      <pre id="resultText"></pre>
      <!-- HTML Preview -->
      <iframe id="htmlPreview" style="display:none;"></iframe>
    </div>
  </div>
</div>

<footer>&copy; 2025 ML-Powered Error Finder</footer>

<script>
const BACKEND_URL = 'https://errorfinder.onrender.com/analyze';

function clearCode() {
  document.getElementById("codeInput").value = "";
  document.getElementById("output").style.display = "none";
  document.getElementById("htmlPreview").style.display = "none";
}

function copyOutput() {
  const text = document.getElementById("resultText").innerText;
  navigator.clipboard.writeText(text);
  alert("‚úÖ Output copied to clipboard!");
}

async function analyzeCode() {
  const code = document.getElementById("codeInput").value.trim();
  const language = document.getElementById("language").value;
  const loader = document.getElementById("loader");
  const output = document.getElementById("output");
  const resultText = document.getElementById("resultText");
  const htmlPreview = document.getElementById("htmlPreview");

  if (!code) {
    alert("‚ö† Please paste some code!");
    return;
  }

  loader.style.display = "block";
  output.style.display = "none";
  htmlPreview.style.display = "none";

  try {
    const response = await fetch(BACKEND_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ code, language })
    });

    const result = await response.json();
    loader.style.display = "none";
    output.style.display = "block";

    let displayText = `üåê Language: ${language.toUpperCase()}\n\n`;
    if (result.output) displayText += `üü¢ Output:\n${result.output}\n\n`;
    if (result.error) displayText += `üî¥ Errors:\n${result.error}\n\n`;
    if (!result.output && !result.error) displayText += "‚ö† No output or errors found.";

    resultText.innerText = displayText;

    // Show HTML preview if HTML code
    if(language === "html") {
      htmlPreview.srcdoc = code;
      htmlPreview.style.display = "block";
    } else {
      htmlPreview.style.display = "none";
    }

  } catch (err) {
    loader.style.display = "none";
    output.style.display = "block";
    resultText.innerText = `‚ùå Connection Error:\n${err.message}\n\nüí° Check if your backend is running.`;
  }
}
</script>

</body>
</html>
