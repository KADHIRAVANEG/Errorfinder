<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üöÄ Code Error Finder</title>

<!-- Prism.js Syntax Highlighting -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/themes/prism-tomorrow.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-c.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-cpp.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-java.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-markup.min.js"></script>

<style>
/* ===================== Reset & Global ===================== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Poppins", sans-serif;
}

body {
  background: linear-gradient(135deg,#141e30,#243b55);
  color:#fff;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:40px 20px;
  line-height:1.6;
}

/* ===================== Container ===================== */
.container {
  width:100%;
  max-width:1400px;
  background: rgba(255,255,255,0.05);
  border-radius:20px;
  padding:50px 40px;
  box-shadow:0 10px 30px rgba(0,0,0,0.35);
  display:flex;
  flex-wrap:wrap;
  gap:40px;
  animation: fadeIn 1.2s ease-in-out;
}

h1 {
  width:100%;
  text-align:center;
  margin-bottom:50px;
  font-size:3rem;
  background:linear-gradient(to right,#00c6ff,#0072ff);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* ===================== Columns ===================== */
.column {
  flex:1;
  min-width:360px;
  background: rgba(255,255,255,0.05);
  border-radius:20px;
  padding:35px 30px;
  box-shadow:0 6px 25px rgba(0,0,0,0.25);
  display:flex;
  flex-direction:column;
  gap:20px;
}

/* ===================== Form Elements ===================== */
label {
  display:block;
  margin-bottom:8px;
  font-weight:600;
  font-size:1.05rem;
}

select, textarea, button {
  width:100%;
  padding:18px 16px;
  border-radius:12px;
  border:none;
  outline:none;
  font-size:1.05rem;
  transition:0.3s ease;
  margin-bottom:20px;
}

select {
  background:#0f2027;
  color:#fff;
  border:2px solid #00c6ff;
}

textarea {
  background:#0f2027;
  color:#fff;
  resize:none;
  min-height:300px;
  border:2px solid #00c6ff;
  line-height:1.6;
}

textarea:focus, select:focus {
  border-color:#ff8c00;
  box-shadow:0 0 12px #ff8c00;
}

button {
  background:linear-gradient(to right,#00c6ff,#0072ff);
  color:#fff;
  font-size:1.15rem;
  font-weight:bold;
  cursor:pointer;
  padding:16px;
}

button:hover {
  background:linear-gradient(to right,#ff8c00,#ff2e63);
  transform:scale(1.05);
}

/* ===================== Loader ===================== */
.loader {
  display:none;
  margin:30px auto;
  border:10px solid rgba(255,255,255,0.1);
  border-left-color:#00c6ff;
  border-radius:50%;
  width:70px;
  height:70px;
  animation:spin 1s linear infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }

/* ===================== Output ===================== */
.output {
  display:none;
  background: rgba(255,255,255,0.08);
  border-radius:20px;
  padding:25px 20px;
  flex:1;
  max-height:550px;
  overflow-y:auto;
  animation: slideUp 0.8s ease-in-out;
}

.output h2 {
  margin-bottom:20px;
  color:#00c6ff;
}

pre {
  white-space:pre-wrap;
  word-wrap:break-word;
  background:#0f2027;
  padding:20px;
  border-radius:12px;
  color:#fffa;
  overflow-x:auto;
  line-height:1.6;
  font-size:1rem;
}

/* ===================== Action Buttons ===================== */
.action-buttons {
  display:flex;
  gap:12px;
  margin-bottom:15px;
}

.action-buttons button {
  flex:1;
}

/* ===================== Animations ===================== */
@keyframes fadeIn { from{opacity:0; transform:translateY(-20px);} to{opacity:1; transform:translateY(0);} }
@keyframes slideUp { from{transform:translateY(50px);opacity:0;} to{transform:translateY(0);opacity:1;} }

footer {
  margin-top:40px;
  text-align:center;
  font-size:1rem;
  opacity:0.8;
}

@media(max-width:900px){.container{flex-direction:column;}}
</style>
</head>

<body>
<div class="container">

  <h1>üöÄ Code Error Finder</h1>

  <!-- ===================== Input Column ===================== -->
  <div class="column">
    <label for="language"><strong>Select Language:</strong></label>
    <select id="language">
      <option value="python">üêç Python</option>
      <option value="c">üîµ C</option>
      <option value="cpp">üü£ C++</option>
      <option value="java">‚òï Java</option>
      <option value="js">üü° JavaScript</option>
      <option value="html">üåê HTML</option>
    </select>

    <label for="codeInput"><strong>Paste Your Code:</strong></label>
    <textarea id="codeInput" placeholder="Paste your code here..."></textarea>

    <div class="action-buttons">
      <button onclick="analyzeCode()">Analyze Code</button>
      <button onclick="clearCode()">Clear Code</button>
    </div>
  </div>

  <!-- ===================== Output Column ===================== -->
  <div class="column">
    <div class="loader" id="loader"></div>

    <div class="output" id="output">
      <h2>üîç Analysis Result</h2>
      <div class="action-buttons">
        <button onclick="copyOutput()">üìã Copy Output</button>
      </div>
      <pre id="resultText"><code></code></pre>
    </div>
  </div>

  <footer>&copy; 2025 ML-Powered Error Finder</footer>
</div>

<script>
const BACKEND_URL = 'https://errorfinder2.onrender.com'; // Update your backend URL

function clearCode() {
  document.getElementById("codeInput").value = "";
  document.getElementById("output").style.display = "none";
}

function copyOutput() {
  const text = document.getElementById("resultText").innerText;
  navigator.clipboard.writeText(text);
  alert("‚úÖ Output copied to clipboard!");
}

async function analyzeCode() {
  const code = document.getElementById("codeInput").value.trim();
  const language = document.getElementById("language").value;
  const loader = document.getElementById("loader");
  const output = document.getElementById("output");
  const codeElement = document.querySelector("#resultText code");

  if(!code) { alert("‚ö†Ô∏è Please paste some code!"); return; }

  loader.style.display = "block";
  output.style.display = "none";

  try {
    const response = await fetch(`${BACKEND_URL}/analyze`, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({code, language})
    });
    const result = await response.json();

    loader.style.display = "none";
    output.style.display = "block";

    let displayText = `Language: ${language.toUpperCase()}\n\n`;

    if(result.output) displayText += `Output:\n${result.output}\n\n`;
    if(result.error) displayText += `Errors:\n${result.error}\n\n`;

    codeElement.className = `language-${language}`;
    codeElement.textContent = displayText;
    Prism.highlightElement(codeElement);

  } catch(err) {
    loader.style.display = "none";
    output.style.display = "block";
    codeElement.className = "language-none";
    codeElement.textContent = `‚ùå Error connecting to backend:\n${err.message}`;
    Prism.highlightElement(codeElement);
  }
}
</script>
</body>
</html>
